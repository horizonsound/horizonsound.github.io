{% if include.title %}
{{ include.title }}

{% endif %} {% assign first_item = include.items[0] %} {%- comment -%} MODE 1: Song tiles (New Releases / Spotlight) {%- endcomment -%} {% if first_item.playlist_id == nil %}
{% for tile in include.items %}  {{ tile.title }}
{{ tile.title }}

{% endfor %}
{% else %} {%- comment -%} MODE 2: Collections (playlist tiles) Ordered by playlists.yml, not homepage.yml {%- endcomment -%} {% assign active_playlists = "" | split: "" %} {% assign coming_soon_playlists = "" | split: "" %} {%- comment -%} Build ordered arrays based on playlist.yml {%- endcomment -%} {% for pl in site.data.playlists %} {% assign tile = include.items | where: "playlist_id", pl.playlist_id | first %} {% if tile %} {% assign has_public = false %} {% for sid in pl.songs %} {% assign song = site.data.music.songs | where: "song_id", sid | first %} {% if song and song.videostatus == "Public" %} {% assign has_public = true %} {% endif %} {% endfor %} {% if has_public %} {% assign active_playlists = active_playlists | push: tile %} {% else %} {% assign coming_soon_playlists = coming_soon_playlists | push: tile %} {% endif %} {% endif %} {% endfor %}
{%- comment -%} ACTIVE playlists first {%- endcomment -%} {% for tile in active_playlists %}  {{ tile.title }}
{{ tile.title }}

{% endfor %} {%- comment -%} COMING SOON playlists second {%- endcomment -%} {% for tile in coming_soon_playlists %}
{{ tile.title }}
Coming Soon
{{ tile.title }}

{% endfor %}
{% endif %}
